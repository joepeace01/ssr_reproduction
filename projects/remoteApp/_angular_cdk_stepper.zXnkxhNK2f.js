import{FocusKeyManager as m}from"@angular/cdk/a11y";import*as f from"@angular/cdk/bidi";import{BidiModule as y}from"@angular/cdk/bidi";import{hasModifierKey as g,SPACE as I,ENTER as v}from"@angular/cdk/keycodes";import*as t from"@angular/core";import{InjectionToken as C,EventEmitter as h,forwardRef as E,booleanAttribute as a,TemplateRef as D,QueryList as u,numberAttribute as k}from"@angular/core";import{ControlContainer as S}from"@angular/forms";import{_getFocusedElementPierceShadowDom as x}from"@angular/cdk/platform";import{Subject as b,of as M}from"rxjs";import{startWith as c,takeUntil as l}from"rxjs/operators";var O=["*"];function R(s,P){s&1&&t.ɵɵprojection(0)}var w=(()=>{class s{constructor(e){this._elementRef=e}focus(){this._elementRef.nativeElement.focus()}static{this.ɵfac=function(i){return new(i||s)(t.ɵɵdirectiveInject(t.ElementRef))}}static{this.ɵdir=t.ɵɵdefineDirective({type:s,selectors:[["","cdkStepHeader",""]],hostAttrs:["role","tab"],standalone:!0})}}return s})(),A=(()=>{class s{constructor(e){this.template=e}static{this.ɵfac=function(i){return new(i||s)(t.ɵɵdirectiveInject(t.TemplateRef))}}static{this.ɵdir=t.ɵɵdefineDirective({type:s,selectors:[["","cdkStepLabel",""]],standalone:!0})}}return s})(),T=0,_=class{},d={NUMBER:"number",EDIT:"edit",DONE:"done",ERROR:"error"},F=new C("STEPPER_GLOBAL_OPTIONS"),N=(()=>{class s{get completed(){return this._completedOverride==null?this._getDefaultCompleted():this._completedOverride}set completed(e){this._completedOverride=e}_getDefaultCompleted(){return this.stepControl?this.stepControl.valid&&this.interacted:this.interacted}get hasError(){return this._customError==null?this._getDefaultError():this._customError}set hasError(e){this._customError=e}_getDefaultError(){return this.stepControl&&this.stepControl.invalid&&this.interacted}constructor(e,i){this._stepper=e,this.interacted=!1,this.interactedStream=new h,this.editable=!0,this.optional=!1,this._completedOverride=null,this._customError=null,this._stepperOptions=i||{},this._displayDefaultIndicatorType=this._stepperOptions.displayDefaultIndicatorType!==!1}select(){this._stepper.selected=this}reset(){this.interacted=!1,this._completedOverride!=null&&(this._completedOverride=!1),this._customError!=null&&(this._customError=!1),this.stepControl&&(this._childForms?.forEach(e=>e.resetForm?.()),this.stepControl.reset())}ngOnChanges(){this._stepper._stateChanged()}_markAsInteracted(){this.interacted||(this.interacted=!0,this.interactedStream.emit(this))}_showError(){return this._stepperOptions.showError??this._customError!=null}static{this.ɵfac=function(i){return new(i||s)(t.ɵɵdirectiveInject(E(()=>p)),t.ɵɵdirectiveInject(F,8))}}static{this.ɵcmp=t.ɵɵdefineComponent({type:s,selectors:[["cdk-step"]],contentQueries:function(i,r,n){if(i&1&&(t.ɵɵcontentQuery(n,A,5),t.ɵɵcontentQuery(n,S,5)),i&2){let o;t.ɵɵqueryRefresh(o=t.ɵɵloadQuery())&&(r.stepLabel=o.first),t.ɵɵqueryRefresh(o=t.ɵɵloadQuery())&&(r._childForms=o)}},viewQuery:function(i,r){if(i&1&&t.ɵɵviewQuery(D,7),i&2){let n;t.ɵɵqueryRefresh(n=t.ɵɵloadQuery())&&(r.content=n.first)}},inputs:{stepControl:"stepControl",label:"label",errorMessage:"errorMessage",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],state:"state",editable:[2,"editable","editable",a],optional:[2,"optional","optional",a],completed:[2,"completed","completed",a],hasError:[2,"hasError","hasError",a]},outputs:{interactedStream:"interacted"},exportAs:["cdkStep"],standalone:!0,features:[t.ɵɵInputTransformsFeature,t.ɵɵNgOnChangesFeature,t.ɵɵStandaloneFeature],ngContentSelectors:O,decls:1,vars:0,template:function(i,r){i&1&&(t.ɵɵprojectionDef(),t.ɵɵtemplate(0,R,1,0,"ng-template"))},encapsulation:2,changeDetection:0})}}return s})(),p=(()=>{class s{get selectedIndex(){return this._selectedIndex}set selectedIndex(e){this.steps&&this._steps?(this._isValidIndex(e),this.selected?._markAsInteracted(),this._selectedIndex!==e&&!this._anyControlsInvalidOrPending(e)&&(e>=this._selectedIndex||this.steps.toArray()[e].editable)&&this._updateSelectedItemIndex(e)):this._selectedIndex=e}get selected(){return this.steps?this.steps.toArray()[this.selectedIndex]:void 0}set selected(e){this.selectedIndex=e&&this.steps?this.steps.toArray().indexOf(e):-1}get orientation(){return this._orientation}set orientation(e){this._orientation=e,this._keyManager&&this._keyManager.withVerticalOrientation(e==="vertical")}constructor(e,i,r){this._dir=e,this._changeDetectorRef=i,this._elementRef=r,this._destroyed=new b,this.steps=new u,this._sortedHeaders=new u,this.linear=!1,this._selectedIndex=0,this.selectionChange=new h,this.selectedIndexChange=new h,this._orientation="horizontal",this._groupId=T++}ngAfterContentInit(){this._steps.changes.pipe(c(this._steps),l(this._destroyed)).subscribe(e=>{this.steps.reset(e.filter(i=>i._stepper===this)),this.steps.notifyOnChanges()})}ngAfterViewInit(){this._stepHeader.changes.pipe(c(this._stepHeader),l(this._destroyed)).subscribe(e=>{this._sortedHeaders.reset(e.toArray().sort((i,r)=>i._elementRef.nativeElement.compareDocumentPosition(r._elementRef.nativeElement)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)),this._sortedHeaders.notifyOnChanges()}),this._keyManager=new m(this._sortedHeaders).withWrap().withHomeAndEnd().withVerticalOrientation(this._orientation==="vertical"),(this._dir?this._dir.change:M()).pipe(c(this._layoutDirection()),l(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e)),this._keyManager.updateActiveItem(this._selectedIndex),this.steps.changes.subscribe(()=>{this.selected||(this._selectedIndex=Math.max(this._selectedIndex-1,0))}),this._isValidIndex(this._selectedIndex)||(this._selectedIndex=0)}ngOnDestroy(){this._keyManager?.destroy(),this.steps.destroy(),this._sortedHeaders.destroy(),this._destroyed.next(),this._destroyed.complete()}next(){this.selectedIndex=Math.min(this._selectedIndex+1,this.steps.length-1)}previous(){this.selectedIndex=Math.max(this._selectedIndex-1,0)}reset(){this._updateSelectedItemIndex(0),this.steps.forEach(e=>e.reset()),this._stateChanged()}_getStepLabelId(e){return`cdk-step-label-${this._groupId}-${e}`}_getStepContentId(e){return`cdk-step-content-${this._groupId}-${e}`}_stateChanged(){this._changeDetectorRef.markForCheck()}_getAnimationDirection(e){let i=e-this._selectedIndex;return i<0?this._layoutDirection()==="rtl"?"next":"previous":i>0?this._layoutDirection()==="rtl"?"previous":"next":"current"}_getIndicatorType(e,i=d.NUMBER){let r=this.steps.toArray()[e],n=this._isCurrentStep(e);return r._displayDefaultIndicatorType?this._getDefaultIndicatorLogic(r,n):this._getGuidelineLogic(r,n,i)}_getDefaultIndicatorLogic(e,i){return e._showError()&&e.hasError&&!i?d.ERROR:!e.completed||i?d.NUMBER:e.editable?d.EDIT:d.DONE}_getGuidelineLogic(e,i,r=d.NUMBER){return e._showError()&&e.hasError&&!i?d.ERROR:e.completed&&!i?d.DONE:e.completed&&i?r:e.editable&&i?d.EDIT:r}_isCurrentStep(e){return this._selectedIndex===e}_getFocusIndex(){return this._keyManager?this._keyManager.activeItemIndex:this._selectedIndex}_updateSelectedItemIndex(e){let i=this.steps.toArray();this.selectionChange.emit({selectedIndex:e,previouslySelectedIndex:this._selectedIndex,selectedStep:i[e],previouslySelectedStep:i[this._selectedIndex]}),this._containsFocus()?this._keyManager.setActiveItem(e):this._keyManager.updateActiveItem(e),this._selectedIndex=e,this.selectedIndexChange.emit(this._selectedIndex),this._stateChanged()}_onKeydown(e){let i=g(e),r=e.keyCode,n=this._keyManager;n.activeItemIndex!=null&&!i&&(r===I||r===v)?(this.selectedIndex=n.activeItemIndex,e.preventDefault()):n.setFocusOrigin("keyboard").onKeydown(e)}_anyControlsInvalidOrPending(e){return this.linear&&e>=0?this.steps.toArray().slice(0,e).some(i=>{let r=i.stepControl;return(r?r.invalid||r.pending||!i.interacted:!i.completed)&&!i.optional&&!i._completedOverride}):!1}_layoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_containsFocus(){let e=this._elementRef.nativeElement,i=x();return e===i||e.contains(i)}_isValidIndex(e){return e>-1&&(!this.steps||e<this.steps.length)}static{this.ɵfac=function(i){return new(i||s)(t.ɵɵdirectiveInject(f.Directionality,8),t.ɵɵdirectiveInject(t.ChangeDetectorRef),t.ɵɵdirectiveInject(t.ElementRef))}}static{this.ɵdir=t.ɵɵdefineDirective({type:s,selectors:[["","cdkStepper",""]],contentQueries:function(i,r,n){if(i&1&&(t.ɵɵcontentQuery(n,N,5),t.ɵɵcontentQuery(n,w,5)),i&2){let o;t.ɵɵqueryRefresh(o=t.ɵɵloadQuery())&&(r._steps=o),t.ɵɵqueryRefresh(o=t.ɵɵloadQuery())&&(r._stepHeader=o)}},inputs:{linear:[2,"linear","linear",a],selectedIndex:[2,"selectedIndex","selectedIndex",k],selected:"selected",orientation:"orientation"},outputs:{selectionChange:"selectionChange",selectedIndexChange:"selectedIndexChange"},exportAs:["cdkStepper"],standalone:!0,features:[t.ɵɵInputTransformsFeature]})}}return s})(),se=(()=>{class s{constructor(e){this._stepper=e,this.type="submit"}static{this.ɵfac=function(i){return new(i||s)(t.ɵɵdirectiveInject(p))}}static{this.ɵdir=t.ɵɵdefineDirective({type:s,selectors:[["button","cdkStepperNext",""]],hostVars:1,hostBindings:function(i,r){i&1&&t.ɵɵlistener("click",function(){return r._stepper.next()}),i&2&&t.ɵɵhostProperty("type",r.type)},inputs:{type:"type"},standalone:!0})}}return s})(),re=(()=>{class s{constructor(e){this._stepper=e,this.type="button"}static{this.ɵfac=function(i){return new(i||s)(t.ɵɵdirectiveInject(p))}}static{this.ɵdir=t.ɵɵdefineDirective({type:s,selectors:[["button","cdkStepperPrevious",""]],hostVars:1,hostBindings:function(i,r){i&1&&t.ɵɵlistener("click",function(){return r._stepper.previous()}),i&2&&t.ɵɵhostProperty("type",r.type)},inputs:{type:"type"},standalone:!0})}}return s})(),ne=(()=>{class s{static{this.ɵfac=function(i){return new(i||s)}}static{this.ɵmod=t.ɵɵdefineNgModule({type:s})}static{this.ɵinj=t.ɵɵdefineInjector({imports:[y]})}}return s})();export{N as CdkStep,w as CdkStepHeader,A as CdkStepLabel,p as CdkStepper,ne as CdkStepperModule,se as CdkStepperNext,re as CdkStepperPrevious,F as STEPPER_GLOBAL_OPTIONS,d as STEP_STATE,_ as StepperSelectionEvent};