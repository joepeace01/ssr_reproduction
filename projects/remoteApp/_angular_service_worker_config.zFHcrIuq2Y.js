var y=Object.defineProperty;var g=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var w=(t,s,e)=>s in t?y(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,E=(t,s)=>{for(var e in s||={})O.call(s,e)&&w(t,e,s[e]);if(g)for(var e of g(s))M.call(s,e)&&w(t,e,s[e]);return t};var u=(t,s,e)=>new Promise((r,n)=>{var i=a=>{try{h(e.next(a))}catch(o){n(o)}},c=a=>{try{h(e.throw(a))}catch(o){n(o)}},h=a=>a.done?r(a.value):Promise.resolve(a.value).then(i,c);h((e=e.apply(t,s)).next())});var R=/([0-9]+[^0-9]+)/g,T=/^([0-9]+)([dhmsu]+)$/;function x(t){let s=[],e;for(;(e=R.exec(t))!==null;)s.push(e[0]);return s.map(r=>{let n=T.exec(r);if(n===null)throw new Error(`Not a valid duration: ${r}`);let i=0;switch(n[2]){case"d":i=864e5;break;case"h":i=36e5;break;case"m":i=6e4;break;case"s":i=1e3;break;case"u":i=1;break;default:throw new Error(`Not a valid duration unit: ${n[2]}`)}return parseInt(n[1])*i}).reduce((r,n)=>r+n,0)}var b="[^/]",S="[^/]*",I="(?:.+\\/)?",v=[{replace:/\./g,with:"\\."},{replace:/\+/g,with:"\\+"},{replace:/\*/g,with:S}],C=[...v,{replace:/\?/g,with:b}],D=[...v,{replace:/\?/g,with:"\\?"}];function d(t,s=!1){let e=s?D:C,r=t.split("/").reverse(),n="";for(;r.length>0;){let i=r.pop();if(i==="**")r.length>0?n+=I:n+=".*";else{let c=e.reduce((h,a)=>h.replace(a.replace,a.with),i);n+=c,r.length>0&&(n+="\\/")}}return n}var P=["/**","!/**/*.*","!/**/*__*","!/**/*__*/**"],A=class{constructor(s,e){this.fs=s,this.baseHref=e}process(s){return u(this,null,function*(){let e={},r=yield this.processAssetGroups(s,e);return{configVersion:1,timestamp:Date.now(),appData:s.appData,index:p(this.baseHref,s.index),assetGroups:r,dataGroups:this.processDataGroups(s),hashTable:N(e),navigationUrls:G(this.baseHref,s.navigationUrls),navigationRequestStrategy:s.navigationRequestStrategy??"performance"}})}processAssetGroups(s,e){return u(this,null,function*(){let r=yield this.fs.list("/"),n=new Set,i=new Map;for(let a of s.assetGroups||[]){if(a.resources.versionedFiles)throw new Error(`Asset-group '${a.name}' in 'ngsw-config.json' uses the 'versionedFiles' option, which is no longer supported. Use 'files' instead.`);let o=W(a.resources.files||[]),l=r.filter(o).filter(f=>!n.has(f)).sort();l.forEach(f=>n.add(f)),i.set(a,l)}let c=[].concat(...Array.from(i.values())).sort(),h=yield L(c,500,a=>this.fs.hash(a));return c.forEach((a,o)=>{e[p(this.baseHref,a)]=h[o]}),Array.from(i.entries()).map(([a,o])=>({name:a.name,installMode:a.installMode||"prefetch",updateMode:a.updateMode||a.installMode||"prefetch",cacheQueryOptions:_(a.cacheQueryOptions),urls:o.map(l=>p(this.baseHref,l)),patterns:(a.resources.urls||[]).map(l=>m(l,this.baseHref,!0))}))})}processDataGroups(s){return(s.dataGroups||[]).map(e=>({name:e.name,patterns:e.urls.map(r=>m(r,this.baseHref,!0)),strategy:e.cacheConfig.strategy||"performance",maxSize:e.cacheConfig.maxSize,maxAge:x(e.cacheConfig.maxAge),timeoutMs:e.cacheConfig.timeout&&x(e.cacheConfig.timeout),cacheOpaqueResponses:e.cacheConfig.cacheOpaqueResponses,cacheQueryOptions:_(e.cacheQueryOptions),version:e.version!==void 0?e.version:1}))}};function G(t,s=P){return s.map(e=>{let r=!e.startsWith("!");return e=r?e:e.slice(1),{positive:r,regex:`^${m(e,t)}$`}})}function L(t,s,e){return u(this,null,function*(){let r=[];for(let n=0;n<t.length;n+=s)r.push(t.slice(n,n+s));return r.reduce((n,i)=>u(this,null,function*(){return(yield n).concat(yield Promise.all(i.map(c=>e(c))))}),Promise.resolve([]))})}function W(t){let s=t.map(e=>e.startsWith("!")?{positive:!1,regex:new RegExp("^"+d(e.slice(1))+"$")}:{positive:!0,regex:new RegExp("^"+d(e)+"$")});return e=>H(e,s)}function H(t,s){return s.reduce((e,r)=>r.positive?e||r.regex.test(t):e&&!r.regex.test(t),!1)}function m(t,s,e){return!t.startsWith("/")&&t.indexOf("://")===-1&&(t=p(s.replace(/^\.(?=\/)/,""),t)),d(t,e)}function p(t,s){return t.endsWith("/")&&s.startsWith("/")?t+s.slice(1):!t.endsWith("/")&&!s.startsWith("/")?t+"/"+s:t+s}function N(t){let s={};return Object.keys(t).sort().forEach(e=>s[e]=t[e]),s}function _(t){return E({ignoreVary:!0},t)}export{A as Generator};/*! Bundled license information:

@angular/service-worker/fesm2022/config.mjs:
  (**
   * @license Angular v18.2.13
   * (c) 2010-2024 Google LLC. https://angular.io/
   * License: MIT
   *)
*/